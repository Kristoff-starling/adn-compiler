app_name: "hotel_reservation"

app_structure:
    - "Frontend->Search"

ingress:
    Search:
    -   name: "Logging"
        spec: "examples/match_action/logging.adn"
        position: "S"

egress:
    Frontend:
    -   name: "RateLimit"
        spec: "examples/match_action/ratelimit.adn"
        config:
        - "bucket_size = 1000"
        - "requests_per_sec = 1000"
        position: "C"

    -   name: "LoadBalancing"
        spec: "examples/match_action/lb_random.adn"
        position: "C"

edge:
    Frontend->Search:
    -   name: "Cache"
        spec: "examples/match_action/cache.sql"
        position: "C"

    -   name: "Mutation"
        spec: "examples/match_action/mutation.sql"

    -   name: "HotelAcl"
        spec: "examples/match_action/hotel-acl.sql"
